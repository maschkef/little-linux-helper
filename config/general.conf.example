# config/general.conf
# Copyright (c) 2025 maschkef
# SPDX-License-Identifier: MIT
#
# This file is part of the 'little-linux-helper' collection.
# Licensed under the MIT License. See the LICENSE file in the project root for more information.
#
# little-linux-helper General Configuration

# =============================================================================
# LANGUAGE SETTINGS
# =============================================================================

# Supported languages (docs/lib/doc_i18n.md):
# - de (German) - Full translation coverage
# - en (English) - Full translation coverage (default)
# - es (Spanish) and fr (French) - Library translations only; modules fall back to English
#
# Set to "auto" to derive the language from LANG/LC_MESSAGES. Unsupported locales fall back to English.
# Default: "en"

CFG_LH_LANG="en"

# =============================================================================
# LOGGING SETTINGS
# =============================================================================

# Log level configuration (docs/lib/doc_logging.md).
# Controls what reaches the console/log files. Levels (ascending verbosity, inclusive):
# - ERROR: Fatal issues that stop the current action
# - WARN:  Problems worth investigating (suggested for production runs)
# - INFO:  Status/progress updates (project default)
# - DEBUG: Verbose diagnostics for troubleshooting
# Tip: DEBUG output is heavily instrumented but stays hidden unless you opt in.

CFG_LH_LOG_LEVEL="INFO"

# Enable/disable console output (true/false).
# Disable for cron/systemd jobs that expect silent stdout.
CFG_LH_LOG_TO_CONSOLE="true"

# Enable/disable file logging (true/false).
# Logs are written to `$LH_LOG_DIR/YYYY-MM/...` so you can review past sessions.
CFG_LH_LOG_TO_FILE="true"

# =============================================================================
# LOG MESSAGE FILE INFO SETTINGS
# =============================================================================

# Toggle inclusion of the originating script in log messages (per level).
# Useful while debugging multi-module sessions.
# Format: [script_name.sh] message - e.g. [mod_backup.sh] Backup started successfully.

# Show file info for ERROR messages (true/false)
CFG_LH_LOG_SHOW_FILE_ERROR="true"

# Show file info for WARN messages (true/false)  
CFG_LH_LOG_SHOW_FILE_WARN="true"

# Show file info for INFO messages (true/false)
CFG_LH_LOG_SHOW_FILE_INFO="false"

# Show file info for DEBUG messages (true/false)
CFG_LH_LOG_SHOW_FILE_DEBUG="true"

# =============================================================================
# LOG MESSAGE TIMESTAMP SETTINGS
# =============================================================================

# Timestamp style applied to every log entry (see CLI Developer Guide section 5.1).
# - "full": 2025-08-24 13:44:23
# - "time": 13:44:23
# - "none": Disable timestamps for minimal output.

# Timestamp format for all log messages
CFG_LH_LOG_TIMESTAMP_FORMAT="time"

# =============================================================================
# GUI SETTINGS
# =============================================================================
#
# The GUI provides a modern web-based interface for Little Linux Helper.
# These settings control the GUI server configuration and network access.
#
# Quick Start:
#   ./gui_launcher.sh              - Start with default settings (localhost:3000)
#   ./gui_launcher.sh -n           - Enable network access for other machines
#   ./gui_launcher.sh -p 8080      - Use custom port (short form)
#   ./gui_launcher.sh --port 8080  - Use custom port (long form)
#   ./gui_launcher.sh -h           - Show comprehensive help

# GUI server port (default: 3000).
# Valid range: 1-65535. Override temporarily with `./gui_launcher.sh -p 8080` or `--port` (docs/doc_gui_launcher.md).
CFG_LH_GUI_PORT="3000"

# GUI server host binding (default: localhost - SECURE)
# Controls which network interfaces the GUI server binds to
#
# Security Options:
# - "localhost" - Only accessible from local machine (RECOMMENDED)
#   GUI URL: http://localhost:3000
#   Security: High - No network exposure
#
# - "0.0.0.0" - Accessible from any network interface (USE WITH CAUTION)
#   GUI URL: http://your-ip:3000 and http://localhost:3000
#   Security: Low - Exposed to network, requires firewall configuration
#   Note: Only use on trusted networks or with proper firewall rules
#
# Command Line Override:
# - Use -n or --network flag to temporarily enable network access
# - Use -p or --port flag to override the port setting
# - Command line flags override this configuration file setting
#
# Priority: Command line arguments > config file > built-in defaults
CFG_LH_GUI_HOST="localhost"

# Firewall automation for `./gui_launcher.sh -f/--open-firewall`.
# - "local": Allow the private home/office networks detected on this machine (e.g. 192.168.x.x, 10.x.x.x). Safe default for LAN testing.
# - "all":   Allow 0.0.0.0/0 (only for hardened environments)
# - Custom:  Provide an IP or CIDR (e.g. "192.168.1.0/24") for targeted rules
# Leave empty to ask on every run (docs/doc_gui_launcher.md).
# Applies only when the launcher manages firewall rules.
CFG_LH_GUI_FIREWALL_RESTRICTION="local"

# GUI authentication settings (docs/GUI_DEVELOPER_GUIDE.md).
#
# Modes:
#   auto    - Default. Skip login on loopback, require sessions when reachable over the network.
#   session - Always enforce the login form (cookie-based auth with CSRF protection).
#   basic   - HTTP Basic Auth backed by bcrypt credentials.
#   none    - Loopback-only. Launcher/backend refuse it when binding externally.
#
# Credentials:
#   - Set LLH_GUI_USER to the login username.
#   - Prefer LLH_GUI_PASS_HASH (bcrypt). Generate with `./gui/little-linux-helper-gui --hash-password "secret"`.
#   - LLH_GUI_PASS_PLAIN is dev-only; the backend hashes it on startup and warns you.
#
# Cookies:
#   - Default cookie name is "__Host-llh_sess". Non-Host cookies fall back automatically when required.
#   - Keep LLH_GUI_COOKIE_SECURE="true" for HTTPS. The launcher relaxes it automatically on localhost.
#
# Cross-origin access:
#   - LLH_GUI_ALLOWED_ORIGINS accepts a comma-separated list of trusted origins for authenticated API calls (e.g. Vite dev server).
#   - Same-origin requests never need to be listed.
#
export LLH_GUI_AUTH_MODE="auto"
export LLH_GUI_USER=""
export LLH_GUI_PASS_HASH=""
export LLH_GUI_PASS_PLAIN=""
export LLH_GUI_COOKIE_NAME="__Host-llh_sess"
export LLH_GUI_COOKIE_SECURE="true"
export LLH_GUI_ALLOWED_ORIGINS=""

# =============================================================================
# FUTURE SETTINGS
# =============================================================================
# Additional general settings can be added here as the project grows
# Examples: notification preferences, UI themes, default timeouts, etc.

# =============================================================================
# RELEASE TAG (OPTIONAL)
# =============================================================================
# Embed a custom release identifier into backup metadata (docs/mod/doc_btrfs_backup.md).
# Leave empty to let the helper pick up `git describe` output or packaged version info automatically.
CFG_LH_RELEASE_TAG=""
